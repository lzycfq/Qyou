webpackJsonp([21],{SJVs:function(e,t,s){"use strict";t.a=function(e){return/^1[3|4|5|7|8][0-9]\d{8}$/.test(e)}},XHo3:function(e,t){},oieC:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("Rus5"),r=s("SJVs"),i={name:"login",data:function(){var e=this;return{ruleForms:{phone:"",verifycode:"",phonecode:"",name:"",pass:""},duanxinrules:{phone:[{required:!0,trigger:"blur",validator:function(e,t,s){t?Object(r.a)(t)?s():s(new Error("请输入正确的11位手机号码")):s(new Error("请输入电话号码"))}}],verifycode:[{required:!0,trigger:"blur",validator:function(t,s,o){""===s?o(new Error("请输入验证码")):s!==e.identifyCode?(console.log("validateVerifycode:",s),o(new Error("验证码不正确!"))):o()}}],phonecode:[{required:!0,trigger:"blur",validator:function(e,t,s){if(!t)return s(new Error("请输入6位短信验证码"))}}],pass:[{validator:function(t,s,o){""===s?o(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),o())},trigger:"blur",required:!0}],name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:5,message:"长度在 8 到 16 个包含大小写字母",trigger:"blur"}]},country:[{value:"666",label:"中国"},{value:"052",label:"日本"},{value:"063",label:"泰国"},{value:"075",label:"新加坡"},{value:"045",label:"马来西亚"}],countryvalue:"666",identifyCodes:"1234567890",identifyCode:"",show:!0,count:"",timer:null}},components:{SIdentify:o.a},props:[],mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},methods:{submitsForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.axios.get("/api/buildlogin",{params:{phone:t.ruleForms.phone,name:t.ruleForms.name,pass:t.ruleForms.pass,"verifycode ":t.ruleForms.verifycode,"phonecode ":t.ruleForms.phonecode}}).then(function(e){t.$store.commit("ADD_COUNT",e.data.token),t.$store.commit("handleUserName",e.data.username),t.$store.commit("handleUserpic",e.data.userpic);var s=window.setInterval(function(){t.totalTime--,t.totalTime<0&&(window.clearInterval(s),t.$Loading.finish(),t.$router.push("/"))},1e3)})})},randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var s=0;s<t;s++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)];console.log(this.identifyCode)}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-col",{attrs:{span:24}},[s("div",{staticClass:"login-container"},[s("div",{staticClass:"login-wrapper"},[s("div",{staticClass:"login-logo"},[s("img",{attrs:{src:"//fes.qyerstatic.com/fe_ssr_passport/static/login_logo2.41bd0a52.png",alt:"穷游"}}),e._v(" "),s("span",{staticClass:"titlelogin"},[e._v("注册")])]),e._v(" "),s("div",{staticClass:"login-section"},[s("div",{staticClass:"q-login-layout"},[s("div",{staticClass:"q-login-layout"},[s("br"),e._v(" "),s("br"),e._v(" "),s("div",{staticClass:"q-login-form q-login-formphone"},[s("el-form",{ref:"ruleForms",staticClass:"demo-ruleForm",attrs:{model:e.ruleForms,rules:e.duanxinrules}},[s("div",[s("div",{staticClass:"login-select"},[s("el-select",{attrs:{placeholder:"请选择",rel:"countryvalue"},model:{value:e.countryvalue,callback:function(t){e.countryvalue=t},expression:"countryvalue"}},e._l(e.country,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),e._v(" "),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("("+e._s(t.value)+")")])])}),1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"phone"}},[s("div",{staticClass:"login-phone"},[s("el-input",{attrs:{placeholder:"请输入手机号码",autocomplete:"off",rel:"phone"},model:{value:e.ruleForms.phone,callback:function(t){e.$set(e.ruleForms,"phone",e._n(t))},expression:"ruleForms.phone"}})],1)])],1),e._v(" "),s("div",{staticClass:"verifycode"},[s("div",{staticClass:"yanzhengma"},[s("el-form-item",{attrs:{prop:"verifycode"}},[s("el-input",{staticClass:"identifyinput",attrs:{placeholder:"请输入验证码",rel:"verifycode"},model:{value:e.ruleForms.verifycode,callback:function(t){e.$set(e.ruleForms,"verifycode",t)},expression:"ruleForms.verifycode"}})],1)],1),e._v(" "),s("div",{staticClass:"identify"},[s("div",{on:{click:e.refreshCode}},[s("SIdentify",{attrs:{identifyCode:e.identifyCode}})],1)]),e._v(" "),s("div",{staticStyle:{clear:"both"}}),e._v(" "),s("p",{staticClass:"loginrefresh",on:{click:e.refreshCode}},[e._v("看不清，换一张 "),s("i",{staticClass:"el-icon-refresh"})])]),e._v(" "),s("div",{staticClass:"verifycode"},[s("div",{staticClass:"yanzhengma"},[s("el-form-item",{attrs:{prop:"phonecode"}},[s("el-input",{staticClass:"identifyinput",attrs:{placeholder:"请输入短信验证码",rel:"phonecode"},model:{value:e.ruleForms.phonecode,callback:function(t){e.$set(e.ruleForms,"phonecode",t)},expression:"ruleForms.phonecode"}})],1)],1),e._v(" "),s("div",{staticClass:"identify"},[s("el-button",{staticStyle:{width:"100%",position:"relative",top:"-16px"},attrs:{type:"success",disabled:e.disabled=!e.show},on:{click:e.send}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e._v("获取验证码")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count))])])],1)]),e._v(" "),s("div",{staticStyle:{clear:"both"}}),e._v(" "),s("el-form-item",{staticClass:"namepass",attrs:{prop:"name"}},[s("el-input",{attrs:{placeholder:"输入一个极具辨识度名字",rel:"name"},model:{value:e.ruleForms.name,callback:function(t){e.$set(e.ruleForms,"name",t)},expression:"ruleForms.name"}})],1),e._v(" "),s("el-form-item",{staticClass:"namepass",attrs:{prop:"pass"}},[s("el-input",{attrs:{placeholder:"输入8-16位数的密码",rel:"pass"},model:{value:e.ruleForms.pass,callback:function(t){e.$set(e.ruleForms,"pass",t)},expression:"ruleForms.pass"}})],1),e._v(" "),s("el-button",{staticClass:"haobtn",on:{click:function(t){return e.submitsForm("ruleForms")}}},[e._v("登录")])],1),e._v(" "),s("div",{staticClass:"q-login-bottom"},[s("span",{staticClass:"fl"},[e._v("\n\t\t\t\t\t\t\t\t\t已有穷游帐号？"),s("router-link",{attrs:{to:"/Login"}},[e._v("登录")])],1),s("span",{staticClass:"fr"},[e._v("\n\t\t\t\t\t\t\t\t\t同意"),s("router-link",{attrs:{to:""}},[e._v("会员条款")]),e._v("和"),s("router-link",{attrs:{to:""}},[e._v("免责声明")])],1)])],1)])])])])])])},staticRenderFns:[]};var l=s("C7Lr")(i,a,!1,function(e){s("XHo3")},null,null);t.default=l.exports}});